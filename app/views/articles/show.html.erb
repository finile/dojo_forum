<div class="row">
  <div class="col-md-12">
    <h1>
      <%= @article.title %>
      <a href="#comment" class="btn btn-md btn-primary pull-right">Comment</a>
      <% if @article.is_collected?(current_user)%>
        <%= link_to 'Uncollect', uncollect_article_path(@article), method: :post, class: "btn btn-md btn-primary pull-right" %>
        <% else %> 
          <%= link_to 'Collect', collect_article_path(@article), method: :post, class: "btn btn-md btn-primary pull-right" %>
        <% end %>
    </h1>
    <div class="col-md-2">
      <img src="http://via.placeholder.com/100x100" class="img-responsive img-rounded">
      <%= @article.user.name %>
    </div> 
    <div class="col-md-10">
      <div class="tweets col-xs-12">
        <img src="http://via.placeholder.com/400x200" class="img-responsive img-rounded">
        <%= @article.content %>
        <%= @article.categories.map(&:name).sort.join(", ") %>

      </div>
      <% if current_user == @article.user %>
        <%= link_to 'Delete', article_path(@article), method: :delete, data: {confirm:"Are you sure?"}, class: "btn btn-md btn-primary pull-right" %>
        <%= link_to 'Edit', edit_article_path(@article), class: "btn btn-md btn-primary pull-right " %>
      <% end %>
    </div>
  </div>
  
  <div id="comment">
    <% @article.comments.each do |comment| %>
    <div class="col-md-12" id="<%= comment.id %>">
      <div class="col-md-2">
        <img src="http://via.placeholder.com/100x100" class="img-responsive img-rounded">
        <%= comment.user.name %>
      </div> 
      <div class="col-md-10">
        <div class="tweets col-xs-12">
          <%= comment.content %>
        </div>
        <% if current_user == @article.user %>
     <!-- <%= link_to 'Delete', article_comment_path(@article,comment), method: :delete, data: {confirm:"Are you sure?"}, class: "btn btn-md btn-primary pull-right" %> -->
  <!--          <span class="delete btn btn-md btn-primary pull-right">Delete</span>
          <%= link_to 'Edit', edit_article_comment_path(@article), class: "btn btn-md btn-primary pull-right " %> -->
        <% end %>
      </div>
    </div>
    <% end %>
  </div>




   <div class="container col-md-12">
    <div class="row">
     <%= form_for [@article, @comment] do |f| %>
      <div class="form-group" >
        <%= f.text_area :content, placeholder: "add comment", class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.submit class: "btn btn-primary" %>
        <%= f.button "Cancel", type: :reset, class: "btn btn-default" %>
      </div>
    <% end %>
    </div>
  </div>

</div>

<p>
  <% if @article.published? %>
    <span>Article</span>
  <% else %>
    <span >Draft</span>
  <% end %>
</p>

<%= link_to 'Back to Index', articles_path %>

<!-- <script>
$("#comment").on("click", ".delete", function(event) {
  var id = event.target.parentNode.parentNode.id;
  console.log(id);
  $.ajax({
    url: "comments/" + id,
    method: "DELETE",
    dataType: "json",
    success: function(data) {
      $("#" + data["id"]).remove();
    }
  });
});
</script> -->
